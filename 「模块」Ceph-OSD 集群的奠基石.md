# Ceph OSD

OSD是Ceph存储集群最关键的组件之一，相比传统对象存储具有革命性的创新：

- 资源精确控制——每个OSD可以对其消耗的CPU、内存、网络带宽等资源进行精确控制。从而避免资源浪费。
- 实例化对象存储——OSD定义了一整套完备和具有强一致性的语义的对象操作接口API。
- 高度自治——Ceph OSD是高度去中心化的，除了数据读写外，还能进行数据重平衡，自动恢复等酷炫特性。OSD之间相互通信，将心跳等信息上报至Monitor，点对点传播OSDMap。从而最小化对用户请求的影响。

## 网络通信——Messenger

Ceph将整个RADOS集群分为两个网络平面，公共网络和集群网络。因为集群网络的流量远远大于公共网络（内部数据恢复和平衡等），所以集群网络负载远远大于公共网络。

OSD内的Messenger主要功能有：1. 客户端与OSD之间进行通信，2. OSD之间进行通信，3. OSD之间链路检测（心跳检测等），以及Cache-Tier等。

osd状态

| 状态 |                            含义                             |
| :--: | :---------------------------------------------------------: |
|  Up  |                          正常状态                           |
| Down |         异常状态（对应临时性故障，不会引起PG迁移）          |
| Out  | OSD处于Down超过一定时间，会被设置为永久性故障，导致PG迁移。 |
|  In  |                        OSD恢复正常。                        |

